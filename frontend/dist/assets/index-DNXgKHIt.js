import{r as c,j as e,h as o,t as h}from"./index-DTB5YGJN.js";import{A as D}from"./index-FtKvC6ry.js";import{F as p,C as g,I as j,s}from"./sweetalert.min-BjMBVopP.js";import{B as l}from"./button-4Hia_NiO.js";import{F as q}from"./Table-w_pEplYq.js";import{P as C,R as I}from"./index-D8ipjAbj.js";import{R as E}from"./EditOutlined-Dw4VbnlD.js";import"./index-D5VRFVwU.js";import"./index-B6thoTjc.js";import"./UserOutlined-Br0YFcVF.js";import"./ExclamationCircleFilled-DyzeEv2b.js";const{Item:m}=p;function L(){const[n]=p.useForm(),[x,a]=c.useState(!1),[b,w]=c.useState([]),[u,f]=c.useState(null),[i,d]=c.useState(0);c.useEffect(()=>{(async()=>{try{const t=o(),{data:y}=await t.get("/api/currency");w(y.data)}catch{s("Warning","Uanble to fetch data","warning")}})()},[i]);const N=async r=>{try{a(!0);let t=h(r);t.key=t.currencyName,await o().post("/api/currency",t),s("Success","Currency Created","success"),n.resetFields(),d(i+1)}catch(t){t?.response?.data?.error?.code===11e3?n.setFields([{name:"currencyName",errors:["Currency Already Exists !"]}]):s("Warning","Try again later","warning")}finally{a(!1)}},S=async r=>{f(r),n.setFieldsValue(r)},R=async r=>{try{a(!0);let t=h(r);await o().put(`/api/currency/${u._id}`,t),s("Success","Currency Update Successfully","success"),f(null),d(i+1),n.resetFields()}catch{s("Warning","Unable to update currency !","warning")}finally{a(!1)}},F=async r=>{try{await o().delete(`/api/currency/${r}`),s("Success","Currency Record Delete Successfully","success"),d(i+1)}catch{s("Warning","Unable to delete currency !","warning")}},A=[{title:"Currency Name",dataIndex:"currencyName",key:"currencyName"},{title:"Currency Description",dataIndex:"currencyDesc",key:"currencyDesc"},{title:"Action",key:"action",fixed:"right",render:(r,t)=>e.jsxs("div",{className:"flex gap-1",children:[e.jsx(C,{title:"Are You Sure?",description:"Once you update, you can also re-update !",onCancel:()=>s("Warning","No Changes Occur","warning"),onConfirm:()=>S(t),children:e.jsx(l,{type:"text",className:"!bg-green-100 !text-green-500",icon:e.jsx(E,{})})}),e.jsx(C,{title:"Are You Sure?",description:"Once you deleted, you can't restore !",onCancel:()=>s("Info","Your Data is Safe","info"),onConfirm:()=>F(t._id),children:e.jsx(l,{type:"text",className:"!bg-rose-100 !text-rose-500",icon:e.jsx(I,{})})})]})}];return e.jsx("div",{children:e.jsx(D,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[e.jsx(g,{title:"Add new currency",children:e.jsxs(p,{form:n,onFinish:u?R:N,layout:"vertical",children:[e.jsx(m,{label:"Currency Name",name:"currencyName",rules:[{required:!0}],children:e.jsx(j,{})}),e.jsx(m,{label:"Currency Description",name:"currencyDesc",children:e.jsx(j.TextArea,{})}),e.jsx(m,{children:u?e.jsx(l,{loading:x,type:"text",htmlType:"submit",className:"!bg-rose-500 !text-white !font-bold !w-full",children:"Update"}):e.jsx(l,{loading:x,type:"text",htmlType:"submit",className:"!bg-blue-500 !text-white !font-bold !w-full",children:"Submit"})})]})}),e.jsx(g,{style:{overflowX:"auto"},title:"Currency list",className:"md:col-span-2",children:e.jsx(q,{scroll:{x:"max-content"},columns:A,dataSource:b})})]})})})}export{L as default};
