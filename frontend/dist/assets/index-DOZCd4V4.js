import{r as o,R as be,f as xt,j as w,h as Ee,t as Qe,a as bt}from"./index-DTB5YGJN.js";import{A as yt}from"./index-FtKvC6ry.js";import{R as St,u as It,a as rt,F as Fe,C as Je,I as xe,b as Rt,s as H,c as Et}from"./sweetalert.min-BjMBVopP.js";import{D as Nt,g as Mt,i as Ot,u as Pt}from"./index-DJShwuNT.js";import{a as Se,S as Tt,F as jt}from"./Table-w_pEplYq.js";import{I as Me,_ as re,c as ae,a as ue,C as Lt,b as T,d as Y,i as $t,w as kt,e as Re,f as At,g as it,h as _t,m as et,F as ye,t as zt,u as st,j as Dt,k as Yt,B as Ne}from"./button-4Hia_NiO.js";import{P as Xt,K as Ze,u as Be,i as Ft,R as He,a as We,b as lt,c as ct,g as ke}from"./index-D5VRFVwU.js";import{P as Xe,R as Zt}from"./index-D8ipjAbj.js";import{R as Bt}from"./EditOutlined-Dw4VbnlD.js";import"./index-B6thoTjc.js";import"./UserOutlined-Br0YFcVF.js";import"./ExclamationCircleFilled-DyzeEv2b.js";var Ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},Wt=function(e,n){return o.createElement(Me,re({},e,{ref:n,icon:Ht}))},Ut=o.forwardRef(Wt),Vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},qt=function(e,n){return o.createElement(Me,re({},e,{ref:n,icon:Vt}))},Gt=o.forwardRef(qt),Kt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},Qt=function(e,n){return o.createElement(Me,re({},e,{ref:n,icon:Kt}))},tt=o.forwardRef(Qt),Jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},en=function(e,n){return o.createElement(Me,re({},e,{ref:n,icon:Jt}))},tn=o.forwardRef(en),nn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},on=function(e,n){return o.createElement(Me,re({},e,{ref:n,icon:nn}))},an=o.forwardRef(on);function ut(){var t=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:t,height:e}}function rn(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||document.body.clientTop||0)}}var Oe=o.createContext(null),sn=function(e){var n=e.visible,a=e.maskTransitionName,r=e.getContainer,s=e.prefixCls,m=e.rootClassName,l=e.icons,f=e.countRender,g=e.showSwitch,C=e.showProgress,c=e.current,I=e.transform,h=e.count,x=e.scale,R=e.minScale,N=e.maxScale,y=e.closeIcon,P=e.onActive,M=e.onClose,O=e.onZoomIn,d=e.onZoomOut,E=e.onRotateRight,b=e.onRotateLeft,p=e.onFlipX,u=e.onFlipY,i=e.onReset,v=e.toolbarRender,S=e.zIndex,L=e.image,j=o.useContext(Oe),X=l.rotateLeft,W=l.rotateRight,U=l.zoomIn,V=l.zoomOut,J=l.close,B=l.left,q=l.right,ee=l.flipX,G=l.flipY,le="".concat(s,"-operations-operation");o.useEffect(function(){var k=function(_){_.keyCode===Ze.ESC&&M()};return n&&window.addEventListener("keydown",k),function(){window.removeEventListener("keydown",k)}},[n]);var te=function(A,_){A.preventDefault(),A.stopPropagation(),P(_)},z=o.useCallback(function(k){var A=k.type,_=k.disabled,Z=k.onClick,D=k.icon;return o.createElement("div",{key:A,className:ae(le,"".concat(s,"-operations-operation-").concat(A),ue({},"".concat(s,"-operations-operation-disabled"),!!_)),onClick:Z},D)},[le,s]),ce=g?z({icon:B,onClick:function(A){return te(A,-1)},type:"prev",disabled:c===0}):void 0,ne=g?z({icon:q,onClick:function(A){return te(A,1)},type:"next",disabled:c===h-1}):void 0,K=z({icon:G,onClick:u,type:"flipY"}),$=z({icon:ee,onClick:p,type:"flipX"}),ie=z({icon:X,onClick:b,type:"rotateLeft"}),F=z({icon:W,onClick:E,type:"rotateRight"}),Q=z({icon:V,onClick:d,type:"zoomOut",disabled:x<=R}),se=z({icon:U,onClick:O,type:"zoomIn",disabled:x===N}),de=o.createElement("div",{className:"".concat(s,"-operations")},K,$,ie,F,Q,se);return o.createElement(Lt,{visible:n,motionName:a},function(k){var A=k.className,_=k.style;return o.createElement(Xt,{open:!0,getContainer:r??document.body},o.createElement("div",{className:ae("".concat(s,"-operations-wrapper"),A,m),style:T(T({},_),{},{zIndex:S})},y===null?null:o.createElement("button",{className:"".concat(s,"-close"),onClick:M},y||J),g&&o.createElement(o.Fragment,null,o.createElement("div",{className:ae("".concat(s,"-switch-left"),ue({},"".concat(s,"-switch-left-disabled"),c===0)),onClick:function(D){return te(D,-1)}},B),o.createElement("div",{className:ae("".concat(s,"-switch-right"),ue({},"".concat(s,"-switch-right-disabled"),c===h-1)),onClick:function(D){return te(D,1)}},q)),o.createElement("div",{className:"".concat(s,"-footer")},C&&o.createElement("div",{className:"".concat(s,"-progress")},f?f(c+1,h):o.createElement("bdi",null,"".concat(c+1," / ").concat(h))),v?v(de,T(T({icons:{prevIcon:ce,nextIcon:ne,flipYIcon:K,flipXIcon:$,rotateLeftIcon:ie,rotateRightIcon:F,zoomOutIcon:Q,zoomInIcon:se},actions:{onActive:P,onFlipY:u,onFlipX:p,onRotateLeft:b,onRotateRight:E,onZoomOut:d,onZoomIn:O,onReset:i,onClose:M},transform:I},j?{current:c,total:h}:{}),{},{image:L})):de)))})},$e={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function ln(t,e,n,a){var r=o.useRef(null),s=o.useRef([]),m=o.useState($e),l=Y(m,2),f=l[0],g=l[1],C=function(x){g($e),$t($e,f)||a?.({transform:$e,action:x})},c=function(x,R){r.current===null&&(s.current=[],r.current=kt(function(){g(function(N){var y=N;return s.current.forEach(function(P){y=T(T({},y),P)}),r.current=null,a?.({transform:y,action:R}),y})})),s.current.push(T(T({},f),x))},I=function(x,R,N,y,P){var M=t.current,O=M.width,d=M.height,E=M.offsetWidth,b=M.offsetHeight,p=M.offsetLeft,u=M.offsetTop,i=x,v=f.scale*x;v>n?(v=n,i=n/f.scale):v<e&&(v=P?v:e,i=v/f.scale);var S=N??innerWidth/2,L=y??innerHeight/2,j=i-1,X=j*O*.5,W=j*d*.5,U=j*(S-f.x-p),V=j*(L-f.y-u),J=f.x-(U-X),B=f.y-(V-W);if(x<1&&v===1){var q=E*v,ee=b*v,G=ut(),le=G.width,te=G.height;q<=le&&ee<=te&&(J=0,B=0)}c({x:J,y:B,scale:v},R)};return{transform:f,resetTransform:C,updateTransform:c,dispatchZoomChange:I}}function nt(t,e,n,a){var r=e+n,s=(n-a)/2;if(n>a){if(e>0)return ue({},t,s);if(e<0&&r<a)return ue({},t,-s)}else if(e<0||r>a)return ue({},t,e<0?s:-s);return{}}function dt(t,e,n,a){var r=ut(),s=r.width,m=r.height,l=null;return t<=s&&e<=m?l={x:0,y:0}:(t>s||e>m)&&(l=T(T({},nt("x",n,t,s)),nt("y",a,e,m))),l}var Ie=1,cn=1;function un(t,e,n,a,r,s,m){var l=r.rotate,f=r.scale,g=r.x,C=r.y,c=o.useState(!1),I=Y(c,2),h=I[0],x=I[1],R=o.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),N=function(d){!e||d.button!==0||(d.preventDefault(),d.stopPropagation(),R.current={diffX:d.pageX-g,diffY:d.pageY-C,transformX:g,transformY:C},x(!0))},y=function(d){n&&h&&s({x:d.pageX-R.current.diffX,y:d.pageY-R.current.diffY},"move")},P=function(){if(n&&h){x(!1);var d=R.current,E=d.transformX,b=d.transformY,p=g!==E&&C!==b;if(!p)return;var u=t.current.offsetWidth*f,i=t.current.offsetHeight*f,v=t.current.getBoundingClientRect(),S=v.left,L=v.top,j=l%180!==0,X=dt(j?i:u,j?u:i,S,L);X&&s(T({},X),"dragRebound")}},M=function(d){if(!(!n||d.deltaY==0)){var E=Math.abs(d.deltaY/100),b=Math.min(E,cn),p=Ie+b*a;d.deltaY>0&&(p=Ie/p),m(p,"wheel",d.clientX,d.clientY)}};return o.useEffect(function(){var O,d,E,b;if(e){E=Se(window,"mouseup",P,!1),b=Se(window,"mousemove",y,!1);try{window.top!==window.self&&(O=Se(window.top,"mouseup",P,!1),d=Se(window.top,"mousemove",y,!1))}catch{}}return function(){var p,u,i,v;(p=E)===null||p===void 0||p.remove(),(u=b)===null||u===void 0||u.remove(),(i=O)===null||i===void 0||i.remove(),(v=d)===null||v===void 0||v.remove()}},[n,h,g,C,l,e]),{isMoving:h,onMouseDown:N,onMouseMove:y,onMouseUp:P,onWheel:M}}function dn(t){return new Promise(function(e){if(!t){e(!1);return}var n=document.createElement("img");n.onerror=function(){return e(!1)},n.onload=function(){return e(!0)},n.src=t})}function ft(t){var e=t.src,n=t.isCustomPlaceholder,a=t.fallback,r=o.useState(n?"loading":"normal"),s=Y(r,2),m=s[0],l=s[1],f=o.useRef(!1),g=m==="error";o.useEffect(function(){var h=!0;return dn(e).then(function(x){!x&&h&&l("error")}),function(){h=!1}},[e]),o.useEffect(function(){n&&!f.current?l("loading"):g&&l("normal")},[e]);var C=function(){l("normal")},c=function(x){f.current=!1,m==="loading"&&x!==null&&x!==void 0&&x.complete&&(x.naturalWidth||x.naturalHeight)&&(f.current=!0,C())},I=g&&a?{src:a}:{onLoad:C,src:e};return[c,I,m]}function Ae(t,e){var n=t.x-e.x,a=t.y-e.y;return Math.hypot(n,a)}function fn(t,e,n,a){var r=Ae(t,n),s=Ae(e,a);if(r===0&&s===0)return[t.x,t.y];var m=r/(r+s),l=t.x+m*(e.x-t.x),f=t.y+m*(e.y-t.y);return[l,f]}function mn(t,e,n,a,r,s,m){var l=r.rotate,f=r.scale,g=r.x,C=r.y,c=o.useState(!1),I=Y(c,2),h=I[0],x=I[1],R=o.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),N=function(d){R.current=T(T({},R.current),d)},y=function(d){if(e){d.stopPropagation(),x(!0);var E=d.touches,b=E===void 0?[]:E;b.length>1?N({point1:{x:b[0].clientX,y:b[0].clientY},point2:{x:b[1].clientX,y:b[1].clientY},eventType:"touchZoom"}):N({point1:{x:b[0].clientX-g,y:b[0].clientY-C},eventType:"move"})}},P=function(d){var E=d.touches,b=E===void 0?[]:E,p=R.current,u=p.point1,i=p.point2,v=p.eventType;if(b.length>1&&v==="touchZoom"){var S={x:b[0].clientX,y:b[0].clientY},L={x:b[1].clientX,y:b[1].clientY},j=fn(u,i,S,L),X=Y(j,2),W=X[0],U=X[1],V=Ae(S,L)/Ae(u,i);m(V,"touchZoom",W,U,!0),N({point1:S,point2:L,eventType:"touchZoom"})}else v==="move"&&(s({x:b[0].clientX-u.x,y:b[0].clientY-u.y},"move"),N({eventType:"move"}))},M=function(){if(n){if(h&&x(!1),N({eventType:"none"}),a>f)return s({x:0,y:0,scale:a},"touchZoom");var d=t.current.offsetWidth*f,E=t.current.offsetHeight*f,b=t.current.getBoundingClientRect(),p=b.left,u=b.top,i=l%180!==0,v=dt(i?E:d,i?d:E,p,u);v&&s(T({},v),"dragRebound")}};return o.useEffect(function(){var O;return n&&e&&(O=Se(window,"touchmove",function(d){return d.preventDefault()},{passive:!1})),function(){var d;(d=O)===null||d===void 0||d.remove()}},[n,e]),{isTouching:h,onTouchStart:y,onTouchMove:P,onTouchEnd:M}}var vn=["fallback","src","imgRef"],gn=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],pn=function(e){var n=e.fallback,a=e.src,r=e.imgRef,s=Re(e,vn),m=ft({src:a,fallback:n}),l=Y(m,2),f=l[0],g=l[1];return be.createElement("img",re({ref:function(c){r.current=c,f(c)}},s,g))},mt=function(e){var n=e.prefixCls,a=e.src,r=e.alt,s=e.imageInfo,m=e.fallback,l=e.movable,f=l===void 0?!0:l,g=e.onClose,C=e.visible,c=e.icons,I=c===void 0?{}:c,h=e.rootClassName,x=e.closeIcon,R=e.getContainer,N=e.current,y=N===void 0?0:N,P=e.count,M=P===void 0?1:P,O=e.countRender,d=e.scaleStep,E=d===void 0?.5:d,b=e.minScale,p=b===void 0?1:b,u=e.maxScale,i=u===void 0?50:u,v=e.transitionName,S=v===void 0?"zoom":v,L=e.maskTransitionName,j=L===void 0?"fade":L,X=e.imageRender,W=e.imgCommonProps,U=e.toolbarRender,V=e.onTransform,J=e.onChange,B=Re(e,gn),q=o.useRef(),ee=o.useContext(Oe),G=ee&&M>1,le=ee&&M>=1,te=o.useState(!0),z=Y(te,2),ce=z[0],ne=z[1],K=ln(q,p,i,V),$=K.transform,ie=K.resetTransform,F=K.updateTransform,Q=K.dispatchZoomChange,se=un(q,f,C,E,$,F,Q),de=se.isMoving,k=se.onMouseDown,A=se.onWheel,_=mn(q,f,C,p,$,F,Q),Z=_.isTouching,D=_.onTouchStart,ve=_.onTouchMove,Ce=_.onTouchEnd,fe=$.rotate,me=$.scale,_e=ae(ue({},"".concat(n,"-moving"),de));o.useEffect(function(){ce||ne(!0)},[ce]);var ze=function(){ie("close")},De=function(){Q(Ie+E,"zoomIn")},ge=function(){Q(Ie/(Ie+E),"zoomOut")},pe=function(){F({rotate:fe+90},"rotateRight")},Pe=function(){F({rotate:fe-90},"rotateLeft")},Te=function(){F({flipX:!$.flipX},"flipX")},je=function(){F({flipY:!$.flipY},"flipY")},ht=function(){ie("reset")},Ye=function(he){var Le=y+he;!Number.isInteger(Le)||Le<0||Le>M-1||(ne(!1),ie(he<0?"prev":"next"),J?.(Le,y))},wt=function(he){!C||!G||(he.keyCode===Ze.LEFT?Ye(-1):he.keyCode===Ze.RIGHT&&Ye(1))},Ct=function(he){C&&(me!==1?F({x:0,y:0,scale:1},"doubleClick"):Q(Ie+E,"doubleClick",he.clientX,he.clientY))};o.useEffect(function(){var oe=Se(window,"keydown",wt,!1);return function(){oe.remove()}},[C,G,y]);var Ge=be.createElement(pn,re({},W,{width:e.width,height:e.height,imgRef:q,className:"".concat(n,"-img"),alt:r,style:{transform:"translate3d(".concat($.x,"px, ").concat($.y,"px, 0) scale3d(").concat($.flipX?"-":"").concat(me,", ").concat($.flipY?"-":"").concat(me,", 1) rotate(").concat(fe,"deg)"),transitionDuration:(!ce||Z)&&"0s"},fallback:m,src:a,onWheel:A,onMouseDown:k,onDoubleClick:Ct,onTouchStart:D,onTouchMove:ve,onTouchEnd:Ce,onTouchCancel:Ce})),Ke=T({url:a,alt:r},s);return be.createElement(be.Fragment,null,be.createElement(Nt,re({transitionName:S,maskTransitionName:j,closable:!1,keyboard:!0,prefixCls:n,onClose:g,visible:C,classNames:{wrapper:_e},rootClassName:h,getContainer:R},B,{afterClose:ze}),be.createElement("div",{className:"".concat(n,"-img-wrapper")},X?X(Ge,T({transform:$,image:Ke},ee?{current:y}:{})):Ge)),be.createElement(sn,{visible:C,transform:$,maskTransitionName:j,closeIcon:x,getContainer:R,prefixCls:n,rootClassName:h,icons:I,countRender:O,showSwitch:G,showProgress:le,current:y,count:M,scale:me,minScale:p,maxScale:i,toolbarRender:U,onActive:Ye,onZoomIn:De,onZoomOut:ge,onRotateRight:pe,onRotateLeft:Pe,onFlipX:Te,onFlipY:je,onClose:g,onReset:ht,zIndex:B.zIndex!==void 0?B.zIndex+1:void 0,image:Ke}))},Ue=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function hn(t){var e=o.useState({}),n=Y(e,2),a=n[0],r=n[1],s=o.useCallback(function(l,f){return r(function(g){return T(T({},g),{},ue({},l,f))}),function(){r(function(g){var C=T({},g);return delete C[l],C})}},[]),m=o.useMemo(function(){return t?t.map(function(l){if(typeof l=="string")return{data:{src:l}};var f={};return Object.keys(l).forEach(function(g){["src"].concat(At(Ue)).includes(g)&&(f[g]=l[g])}),{data:f}}):Object.keys(a).reduce(function(l,f){var g=a[f],C=g.canPreview,c=g.data;return C&&l.push({data:c,id:f}),l},[])},[t,a]);return[m,s,!!t]}var wn=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Cn=["src"],xn=function(e){var n,a=e.previewPrefixCls,r=a===void 0?"rc-image-preview":a,s=e.children,m=e.icons,l=m===void 0?{}:m,f=e.items,g=e.preview,C=e.fallback,c=it(g)==="object"?g:{},I=c.visible,h=c.onVisibleChange,x=c.getContainer,R=c.current,N=c.movable,y=c.minScale,P=c.maxScale,M=c.countRender,O=c.closeIcon,d=c.onChange,E=c.onTransform,b=c.toolbarRender,p=c.imageRender,u=Re(c,wn),i=hn(f),v=Y(i,3),S=v[0],L=v[1],j=v[2],X=Be(0,{value:R}),W=Y(X,2),U=W[0],V=W[1],J=o.useState(!1),B=Y(J,2),q=B[0],ee=B[1],G=((n=S[U])===null||n===void 0?void 0:n.data)||{},le=G.src,te=Re(G,Cn),z=Be(!!I,{value:I,onChange:function(Z,D){h?.(Z,D,U)}}),ce=Y(z,2),ne=ce[0],K=ce[1],$=o.useState(null),ie=Y($,2),F=ie[0],Q=ie[1],se=o.useCallback(function(_,Z,D,ve){var Ce=j?S.findIndex(function(fe){return fe.data.src===Z}):S.findIndex(function(fe){return fe.id===_});V(Ce<0?0:Ce),K(!0),Q({x:D,y:ve}),ee(!0)},[S,j]);o.useEffect(function(){ne?q||V(0):ee(!1)},[ne]);var de=function(Z,D){V(Z),d?.(Z,D)},k=function(){K(!1),Q(null)},A=o.useMemo(function(){return{register:L,onPreview:se}},[L,se]);return o.createElement(Oe.Provider,{value:A},s,o.createElement(mt,re({"aria-hidden":!ne,movable:N,visible:ne,prefixCls:r,closeIcon:O,onClose:k,mousePosition:F,imgCommonProps:te,src:le,fallback:C,icons:l,minScale:y,maxScale:P,getContainer:x,current:U,count:S.length,countRender:M,onTransform:E,toolbarRender:b,imageRender:p,onChange:de},u)))},ot=0;function bn(t,e){var n=o.useState(function(){return ot+=1,String(ot)}),a=Y(n,1),r=a[0],s=o.useContext(Oe),m={data:e,canPreview:t};return o.useEffect(function(){if(s)return s.register(r,m)},[]),o.useEffect(function(){s&&s.register(r,m)},[t,e]),r}var yn=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Sn=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],qe=function(e){var n=e.src,a=e.alt,r=e.onPreviewClose,s=e.prefixCls,m=s===void 0?"rc-image":s,l=e.previewPrefixCls,f=l===void 0?"".concat(m,"-preview"):l,g=e.placeholder,C=e.fallback,c=e.width,I=e.height,h=e.style,x=e.preview,R=x===void 0?!0:x,N=e.className,y=e.onClick,P=e.onError,M=e.wrapperClassName,O=e.wrapperStyle,d=e.rootClassName,E=Re(e,yn),b=g&&g!==!0,p=it(R)==="object"?R:{},u=p.src,i=p.visible,v=i===void 0?void 0:i,S=p.onVisibleChange,L=S===void 0?r:S,j=p.getContainer,X=j===void 0?void 0:j,W=p.mask,U=p.maskClassName,V=p.movable,J=p.icons,B=p.scaleStep,q=p.minScale,ee=p.maxScale,G=p.imageRender,le=p.toolbarRender,te=Re(p,Sn),z=u??n,ce=Be(!!v,{value:v,onChange:L}),ne=Y(ce,2),K=ne[0],$=ne[1],ie=ft({src:n,isCustomPlaceholder:b,fallback:C}),F=Y(ie,3),Q=F[0],se=F[1],de=F[2],k=o.useState(null),A=Y(k,2),_=A[0],Z=A[1],D=o.useContext(Oe),ve=!!R,Ce=function(){$(!1),Z(null)},fe=ae(m,M,d,ue({},"".concat(m,"-error"),de==="error")),me=o.useMemo(function(){var ge={};return Ue.forEach(function(pe){e[pe]!==void 0&&(ge[pe]=e[pe])}),ge},Ue.map(function(ge){return e[ge]})),_e=o.useMemo(function(){return T(T({},me),{},{src:z})},[z,me]),ze=bn(ve,_e),De=function(pe){var Pe=rn(pe.target),Te=Pe.left,je=Pe.top;D?D.onPreview(ze,z,Te,je):(Z({x:Te,y:je}),$(!0)),y?.(pe)};return o.createElement(o.Fragment,null,o.createElement("div",re({},E,{className:fe,onClick:ve?De:y,style:T({width:c,height:I},O)}),o.createElement("img",re({},me,{className:ae("".concat(m,"-img"),ue({},"".concat(m,"-img-placeholder"),g===!0),N),style:T({height:I},h),ref:Q},se,{width:c,height:I,onError:P})),de==="loading"&&o.createElement("div",{"aria-hidden":"true",className:"".concat(m,"-placeholder")},g),W&&ve&&o.createElement("div",{className:ae("".concat(m,"-mask"),U),style:{display:h?.display==="none"?"none":void 0}},W)),!D&&ve&&o.createElement(mt,re({"aria-hidden":!K,visible:K,prefixCls:f,onClose:Ce,mousePosition:_,src:z,alt:a,imageInfo:{width:c,height:I},fallback:C,getContainer:X,icons:J,movable:V,scaleStep:B,minScale:q,maxScale:ee,rootClassName:d,imageRender:G,imgCommonProps:me,toolbarRender:le},te)))};qe.PreviewGroup=xn;const Ve=t=>({position:t||"absolute",inset:0}),In=t=>{const{iconCls:e,motionDurationSlow:n,paddingXXS:a,marginXXS:r,prefixCls:s,colorTextLightSolid:m}=t;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:m,background:new ye("#000").setA(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${s}-mask-info`]:Object.assign(Object.assign({},zt),{padding:`0 ${st(a)}`,[e]:{marginInlineEnd:r,svg:{verticalAlign:"baseline"}}})}},Rn=t=>{const{previewCls:e,modalMaskBg:n,paddingSM:a,marginXL:r,margin:s,paddingLG:m,previewOperationColorDisabled:l,previewOperationHoverColor:f,motionDurationSlow:g,iconCls:C,colorTextLightSolid:c}=t,I=new ye(n).setA(.1),h=I.clone().setA(.2);return{[`${e}-footer`]:{position:"fixed",bottom:r,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:t.previewOperationColor,transform:"translateX(-50%)"},[`${e}-progress`]:{marginBottom:s},[`${e}-close`]:{position:"fixed",top:r,right:{_skip_check_:!0,value:r},display:"flex",color:c,backgroundColor:I.toRgbString(),borderRadius:"50%",padding:a,outline:0,border:0,cursor:"pointer",transition:`all ${g}`,"&:hover":{backgroundColor:h.toRgbString()},[`& > ${C}`]:{fontSize:t.previewOperationSize}},[`${e}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${st(m)}`,backgroundColor:I.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:a,padding:a,cursor:"pointer",transition:`all ${g}`,userSelect:"none",[`&:not(${e}-operations-operation-disabled):hover > ${C}`]:{color:f},"&-disabled":{color:l,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${C}`]:{fontSize:t.previewOperationSize}}}}},En=t=>{const{modalMaskBg:e,iconCls:n,previewOperationColorDisabled:a,previewCls:r,zIndexPopup:s,motionDurationSlow:m}=t,l=new ye(e).setA(.1),f=l.clone().setA(.2);return{[`${r}-switch-left, ${r}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:t.calc(s).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:t.imagePreviewSwitchSize,height:t.imagePreviewSwitchSize,marginTop:t.calc(t.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:t.previewOperationColor,background:l.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${m}`,userSelect:"none","&:hover":{background:f.toRgbString()},"&-disabled":{"&, &:hover":{color:a,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:t.previewOperationSize}},[`${r}-switch-left`]:{insetInlineStart:t.marginSM},[`${r}-switch-right`]:{insetInlineEnd:t.marginSM}}},Nn=t=>{const{motionEaseOut:e,previewCls:n,motionDurationSlow:a,componentCls:r}=t;return[{[`${r}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Ve()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${a} ${e} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Ve()),{transition:`transform ${a} ${e} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${r}-preview-root`]:{[`${n}-wrap`]:{zIndex:t.zIndexPopup}}},{[`${r}-preview-operations-wrapper`]:{position:"fixed",zIndex:t.calc(t.zIndexPopup).add(1).equal()},"&":[Rn(t),En(t)]}]},Mn=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",display:"inline-block",[`${e}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${e}-img-placeholder`]:{backgroundColor:t.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${e}-mask`]:Object.assign({},In(t)),[`${e}-mask:hover`]:{opacity:1},[`${e}-placeholder`]:Object.assign({},Ve())}}},On=t=>{const{previewCls:e}=t;return{[`${e}-root`]:Ft(t,"zoom"),"&":Ot(t,!0)}},Pn=t=>({zIndexPopup:t.zIndexPopupBase+80,previewOperationColor:new ye(t.colorTextLightSolid).setA(.65).toRgbString(),previewOperationHoverColor:new ye(t.colorTextLightSolid).setA(.85).toRgbString(),previewOperationColorDisabled:new ye(t.colorTextLightSolid).setA(.25).toRgbString(),previewOperationSize:t.fontSizeIcon*1.5}),vt=_t("Image",t=>{const e=`${t.componentCls}-preview`,n=et(t,{previewCls:e,modalMaskBg:new ye("#000").setA(.45).toRgbString(),imagePreviewSwitchSize:t.controlHeightLG});return[Mn(n),Nn(n),Mt(et(n,{componentCls:e})),On(n)]},Pn);var Tn=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]]);return n};const gt={rotateLeft:o.createElement(Ut,null),rotateRight:o.createElement(Gt,null),zoomIn:o.createElement(tn,null),zoomOut:o.createElement(an,null),close:o.createElement(St,null),left:o.createElement(We,null),right:o.createElement(He,null),flipX:o.createElement(tt,null),flipY:o.createElement(tt,{rotate:90})},jn=t=>{var{previewPrefixCls:e,preview:n}=t,a=Tn(t,["previewPrefixCls","preview"]);const{getPrefixCls:r,direction:s}=o.useContext(Dt),m=r("image",e),l=`${m}-preview`,f=r(),g=lt(m),[C,c,I]=vt(m,g),[h]=ct("ImagePreview",typeof n=="object"?n.zIndex:void 0),x=o.useMemo(()=>Object.assign(Object.assign({},gt),{left:s==="rtl"?o.createElement(He,null):o.createElement(We,null),right:s==="rtl"?o.createElement(We,null):o.createElement(He,null)}),[s]),R=o.useMemo(()=>{var N;if(n===!1)return n;const y=typeof n=="object"?n:{},P=ae(c,I,g,(N=y.rootClassName)!==null&&N!==void 0?N:"");return Object.assign(Object.assign({},y),{transitionName:ke(f,"zoom",y.transitionName),maskTransitionName:ke(f,"fade",y.maskTransitionName),rootClassName:P,zIndex:h})},[n]);return C(o.createElement(qe.PreviewGroup,Object.assign({preview:R,previewPrefixCls:l,icons:x},a)))};var at=function(t,e){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.indexOf(a)<0&&(n[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(t);r<a.length;r++)e.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(t,a[r])&&(n[a[r]]=t[a[r]]);return n};const pt=t=>{const{prefixCls:e,preview:n,className:a,rootClassName:r,style:s}=t,m=at(t,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:l,getPopupContainer:f,className:g,style:C,preview:c}=Yt("image"),[I]=It("Image"),h=l("image",e),x=l(),R=lt(h),[N,y,P]=vt(h,R),M=ae(r,y,P,R),O=ae(a,y,g),[d]=ct("ImagePreview",typeof n=="object"?n.zIndex:void 0),E=o.useMemo(()=>{if(n===!1)return n;const p=typeof n=="object"?n:{},{getContainer:u,closeIcon:i,rootClassName:v,destroyOnClose:S,destroyOnHidden:L}=p,j=at(p,["getContainer","closeIcon","rootClassName","destroyOnClose","destroyOnHidden"]);return Object.assign(Object.assign({mask:o.createElement("div",{className:`${h}-mask-info`},o.createElement(rt,null),I?.preview),icons:gt},j),{destroyOnClose:L??S,rootClassName:ae(M,v),getContainer:u??f,transitionName:ke(x,"zoom",p.transitionName),maskTransitionName:ke(x,"fade",p.maskTransitionName),zIndex:d,closeIcon:i??c?.closeIcon})},[n,I,c?.closeIcon]),b=Object.assign(Object.assign({},C),s);return N(o.createElement(qe,Object.assign({prefixCls:h,preview:E,rootClassName:M,className:O,style:b},m)))};pt.PreviewGroup=jn;const{Item:we}=Fe;function Hn(){const[t]=Fe.useForm(),[e,n]=o.useState(!1),[a,r]=o.useState(null),[s,m]=o.useState([]),[l,f]=o.useState([]),[g,C]=o.useState([]),[c,I]=o.useState(null),[h,x]=o.useState(0),{data:R,error:N}=Pt("/api/branch",xt,{revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:12e5});o.useEffect(()=>{if(R){let u=R&&R?.data.map(i=>({label:i.branchName,value:i.branchName,key:i.key}));C(u)}N&&console.error("Error fetching branches:",N)},[R,N]),o.useEffect(()=>{(async()=>{try{const i=Ee(),{data:v}=await i.get("/api/users");m(v.data),f(v.data)}catch{H("Warning","Uanble to fetch data","warning")}})()},[h]);const y=async u=>{try{n(!0);let i=Qe(u);i.profile=a||"bankimages/dummy.png",i.key=i.email,i.userType="employee";const v=Ee();await v.post("/api/users",i);const S={email:i.email,password:i.password};await v.post("/api/send-email",S),H("Success","Employee Created","success"),t.resetFields(),r(null),x(h+1)}catch(i){i?.response?.data?.error?.code===11e3?t.setFields([{name:"email",errors:["Email Already Exists !"]}]):H("Warning","Try again later","warning")}finally{n(!1)}},P=async(u,i)=>{try{const v={isActive:!i};await Ee().put(`/api/users/${u}`,v),H("Success","Record Update Successfully","success"),x(h+1)}catch{H("Warning","Unable to update isActive !","warning")}},M=async u=>{I(u),t.setFieldsValue(u)},O=async u=>{try{n(!0);let i=Qe(u);a&&(i.profile=a),await Ee().put(`/api/users/${c._id}`,i),H("Success","Employee Record Update Successfully","success"),t.resetFields(),I(null),x(h+1)}catch{H("Warning","Unable to update employee !","warning")}finally{n(!1)}},d=async u=>{try{await Ee().delete(`/api/users/${u}`),H("Success","Employee Record Delete Successfully","success"),x(h+1)}catch{H("Warning","Unable to delete employee !","warning")}},E=async u=>{const i=u.target.files[0],v="employeePhoto";try{const S=await bt(i,v);r(S.filePath),H("Success","Image uploaded successfully","success")}catch{H("Failed","Unable to upload","warning")}},b=u=>{let i=u.target.value.trim().toLowerCase(),v=l&&l.filter(S=>{if(S?.fullname?.toLowerCase().indexOf(i)!=-1)return S;if(S?.userType?.toLowerCase().indexOf(i)!=-1)return S;if(S?.email?.toLowerCase().indexOf(i)!=-1)return S;if(S?.branch?.toLowerCase().indexOf(i)!=-1)return S;if(S?.mobile?.toLowerCase().indexOf(i)!=-1)return S;if(S?.address?.toLowerCase().indexOf(i)!=-1)return S});m(v)},p=[{title:"Profile",key:"profile",render:(u,i)=>w.jsx(pt,{src:`https://bank-app-1-wr69.onrender.com/${i.profile}`,className:"rounded-full",width:40,height:40})},{title:"User Type",dataIndex:"userType",key:"userType",render:u=>u==="admin"?w.jsx("span",{className:"text-indigo-500 capitalize",children:u}):u==="employee"?w.jsx("span",{className:"text-green-500 capitalize",children:u}):w.jsx("span",{className:"text-red-500 capitalize",children:u})},{title:"Branch",dataIndex:"branch",key:"branch"},{title:"Fullname",dataIndex:"fullname",key:"fullname",render:u=>w.jsx("span",{className:"capitalize",children:u})},{title:"Email",dataIndex:"email",key:"email"},{title:"Mobile",dataIndex:"mobile",key:"mobile"},{title:"Address",dataIndex:"address",key:"address"},{title:"Action",key:"action",fixed:"right",render:(u,i)=>w.jsxs("div",{className:"flex gap-1",children:[w.jsx(Xe,{title:"Are You Sure?",description:"Once you update, you can also re-update !",onCancel:()=>H("Warning","No Changes Occur","warning"),onConfirm:()=>P(i._id,i.isActive),children:w.jsx(Ne,{type:"text",className:`${i.isActive?"!bg-indigo-100 !text-indigo-500":"!bg-pink-100 !text-pink-500"}`,icon:i.isActive?w.jsx(rt,{}):w.jsx(Et,{})})}),w.jsx(Xe,{title:"Are You Sure?",description:"Once you update, you can also re-update !",onCancel:()=>H("Warning","No Changes Occur","warning"),onConfirm:()=>M(i),children:w.jsx(Ne,{type:"text",className:"!bg-green-100 !text-green-500",icon:w.jsx(Bt,{})})}),w.jsx(Xe,{title:"Are You Sure?",description:"Once you deleted, you can't restore !",onCancel:()=>H("Info","Your Data is Safe","info"),onConfirm:()=>d(i._id),children:w.jsx(Ne,{type:"text",className:"!bg-rose-100 !text-rose-500",icon:w.jsx(Zt,{})})})]})}];return w.jsx("div",{children:w.jsx(yt,{children:w.jsxs("div",{className:"grid md:grid-cols-3 gap-3",children:[w.jsx(Je,{title:"Add new employee",children:w.jsxs(Fe,{form:t,onFinish:c?O:y,layout:"vertical",children:[w.jsx(we,{name:"branch",label:"Select Branch",rules:[{required:!0}],children:w.jsx(Tt,{placeholder:"Select Branch",options:g})}),w.jsx(we,{label:"Profile",name:"xyz",children:w.jsx(xe,{onChange:E,type:"file"})}),w.jsxs("div",{className:"grid md:grid-cols-2 gap-x-2",children:[w.jsx(we,{label:"Fullname",name:"fullname",rules:[{required:!0}],children:w.jsx(xe,{})}),w.jsx(we,{label:"Mobile",name:"mobile",rules:[{required:!0}],children:w.jsx(xe,{type:"number"})}),w.jsx(we,{label:"Email",name:"email",rules:[{required:!0}],children:w.jsx(xe,{})}),w.jsx(we,{label:"Password",name:"password",rules:[{required:!0}],children:w.jsx(xe,{disabled:!!c})})]}),w.jsx(we,{label:"Address",name:"address",children:w.jsx(xe.TextArea,{})}),w.jsx(we,{children:c?w.jsx(Ne,{loading:e,type:"text",htmlType:"submit",className:"!bg-rose-500 !text-white !font-bold !w-full",children:"Update"}):w.jsx(Ne,{loading:e,type:"text",htmlType:"submit",className:"!bg-blue-500 !text-white !font-bold !w-full",children:"Submit"})})]})}),w.jsx(Je,{style:{overflowX:"auto"},title:"Employee list",extra:w.jsx("div",{children:w.jsx(xe,{placeholder:"Search By All",prefix:w.jsx(Rt,{}),onChange:b})}),className:"md:col-span-2",children:w.jsx(jt,{scroll:{x:"max-content"},columns:p,dataSource:s})})]})})})}export{Hn as default};
