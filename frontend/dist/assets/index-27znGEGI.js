import{r as i,j as e,h as p,t as w}from"./index-DTB5YGJN.js";import{A as S}from"./index-FtKvC6ry.js";import{F as j,C as T,I as s,s as o}from"./sweetalert.min-BjMBVopP.js";import{B as f}from"./button-4Hia_NiO.js";import{R as I}from"./EditOutlined-Dw4VbnlD.js";import"./index-D5VRFVwU.js";import"./index-B6thoTjc.js";import"./UserOutlined-Br0YFcVF.js";import"./ExclamationCircleFilled-DyzeEv2b.js";const{Item:a}=j;function O(){const[d]=j.useForm(),[g,c]=i.useState(!1),[u,b]=i.useState(null),[n,B]=i.useState(null),[x,k]=i.useState(0),[h,y]=i.useState(!1);i.useEffect(()=>{(async()=>{try{const t=p(),{data:r}=await t.get("/api/branding");d.setFieldsValue(r?.data[0]),B(r?.data[0]),y(!0)}catch{o("Warning","Uanble to fetch data","warning")}})()},[x]);const F=async l=>{try{c(!0);const t=w(l);t.bankLogo=u||"bankimages/dummy.png";const r={email:t.email,fullname:t.fullname,password:t.password,userType:"admin",isActive:!0,profile:"bankimages/dummy.png"},m=p();await m.post("/api/branding",t),await m.post("/api/users",r),o("Success","Branding Created Successfully","success"),d.resetFields(),b(null),k(x+1)}catch{o("Warning","Unable to store branding !","warning")}finally{c(!1)}},q=async l=>{try{c(!0);const t=w(l);u&&(t.bankLogo=u),await p().put(`/api/branding/${n._id}`,t),o("Success","Branding Updated Successfully","success"),d.resetFields(),b(null),k(x+1)}catch{o("Warning","Unable to update branding !","warning")}finally{c(!1)}},A=async l=>{try{let t=l.target.files[0];const r=new FormData;r.append("photo",t);const m=p(),{data:N}=await m.post("/api/upload",r);b(N.filePath)}catch{o("Failed","Unable to upload","warning")}};return e.jsx(S,{children:e.jsx(T,{title:"Bank Details",extra:e.jsx(f,{onClick:()=>y(!h),icon:e.jsx(I,{})}),children:e.jsxs(j,{form:d,layout:"vertical",onFinish:n?q:F,disabled:n?h:!h,children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-x-3",children:[e.jsx(a,{label:"Bank Name",name:"bankName",rules:[{required:!0}],children:e.jsx(s,{})}),e.jsx(a,{label:"Bank Tagline",name:"bankTagline",rules:[{required:!0}],children:e.jsx(s,{})}),e.jsx(a,{label:"Bank Logo",name:"xyz",children:e.jsx(s,{type:"file",onChange:A})}),e.jsx(a,{label:"Bank Account No",name:"bankAccountNo",rules:[{required:!0}],children:e.jsx(s,{})}),e.jsx(a,{label:"Bank Account Transaction Id",name:"bankTransactionId",rules:[{required:!0}],children:e.jsx(s,{})}),e.jsx(a,{label:"Bank Address",name:"bankAddress",rules:[{required:!0}],children:e.jsx(s,{})}),e.jsxs("div",{className:`${n?"hidden":"md:col-span-3 grid md:grid-cols-3 gap-x-3"}`,children:[e.jsx(a,{label:"Admin Fullname",name:"fullname",rules:[{required:!n}],children:e.jsx(s,{})}),e.jsx(a,{label:"Admin Email",name:"email",rules:[{required:!n}],children:e.jsx(s,{})}),e.jsx(a,{label:"Admin Password",name:"password",rules:[{required:!n}],children:e.jsx(s.Password,{})})]}),e.jsx(a,{label:"Bank LinkedIn",name:"bankLinkedIn",children:e.jsx(s,{type:"url"})}),e.jsx(a,{label:"Bank Twitter",name:"bankTwitter",children:e.jsx(s,{type:"url"})}),e.jsx(a,{label:"Bank Facebook",name:"bankFacebook",children:e.jsx(s,{type:"url"})})]}),e.jsx(a,{label:"Bank Description",name:"bankDesc",children:e.jsx(s.TextArea,{})}),n?e.jsx(a,{className:"flex justify-end items-center",children:e.jsx(f,{loading:g,type:"text",htmlType:"submit",className:"!bg-rose-500 !text-white !font-bold",children:"Update"})}):e.jsx(a,{className:"flex justify-end items-center",children:e.jsx(f,{loading:g,type:"text",htmlType:"submit",className:"!bg-blue-500 !text-white !font-bold",children:"Submit"})})]})})})}export{O as default};
